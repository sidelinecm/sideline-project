# การตั้งค่าการ build ของเว็บไซต์
[build]
  publish = "."  # โฟลเดอร์ที่เก็บไฟล์สุดท้ายของเว็บไซต์

# คอนฟิก Headers สำหรับการแคชและควบคุมการโหลดไฟล์ต่าง ๆ
[[headers]]
  for = "*.html"
  [headers.values]
    cache-control = "public, max-age=600, must-revalidate"  # HTML cache 10 นาที

[[headers]]
  for = "/sw.js"
  [headers.values]
    cache-control = "no-store, no-cache, must-revalidate"  # Service Worker ไม่แคช

[[headers]]
  for = "/manifest.webmanifest"
  [headers.values]
    cache-control = "public, max-age=86400, must-revalidate"  # 1 วัน

[[headers]]
  for = "/robots.txt"
  [headers.values]
    cache-control = "public, max-age=86400, must-revalidate"  # 1 วัน

[[headers]]
  for = "/sitemap.xml"
  [headers.values]
    cache-control = "public, max-age=86400, must-revalidate"  # 1 วัน

# ควบคุมไฟล์ static assets ที่ไม่ค่อยเปลี่ยนแปลง ให้แคชได้นานและไม่เปลี่ยนแปลง
[[headers]]
  for = """
  /images/*
  /icons/*
  /fonts/*
  /*.css
  /*.js
  /*.woff
  /*.woff2
  /*.ttf
  /*.eot
  /*.svg
  /*.png
  /*.jpg
  /*.jpeg
  /*.gif
  """
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"  # 1 ปีและไม่เปลี่ยนแปลง

# ควบคุมไฟล์ที่อัปเดตบ่อย เช่น HTML ให้แคชได้นานขึ้น แต่ยังเช็คการเปลี่ยนแปลง
[[headers]]
  for = "*.html"
  [headers.values]
    cache-control = "public, max-age=600, must-revalidate"  # 10 นาที

# กำหนดการ redirect สำหรับลิงก์เก่าไปใหม่
[[redirects]]
  from = "/old-path/*"
  to = "/new-path/:splat"
  status = 301
  force = true

[[redirects]]
  from = "/old-page.html"
  to = "/new-page.html"
  status = 301
  force = true

# ถ้าลิงก์ไม่พบ ให้ redirect ไปยัง 404.html
[[redirects]]
  from = "/*"
  to = "/404.html"
  status = 404
