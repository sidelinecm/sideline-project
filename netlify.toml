# =========================================================
# üèóÔ∏è NETLIFY ULTIMATE CONFIGURATION (2025 Standard)
# =========================================================

[build]
  publish = "."
  command = "" 
  # ‡πÉ‡∏ä‡πâ Node.js ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Edge Functions ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏´‡∏•
  environment = { NODE_VERSION = "20" }

# =========================================================
# ü§ñ EDGE FUNCTIONS ROUTING (‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏¢‡∏Å‡∏ó‡∏≤‡∏á‡∏î‡πà‡∏ß‡∏ô‡πÉ‡∏´‡πâ Bot)
# =========================================================

# 1. Sitemap: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå XML ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å
[[edge_functions]]
  function = "sitemap"
  path = "/sitemap.xml"

# 2. ‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ô‡πâ‡∏≠‡∏á‡πÜ: ‡πÉ‡∏´‡πâ render-bot.js ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ (‡πÅ‡∏™‡∏î‡∏á Rich Snippets/‡∏£‡∏π‡∏õ/‡∏£‡∏≤‡∏Ñ‡∏≤)
[[edge_functions]]
  function = "render-bot"
  path = "/sideline/*"

[[edge_functions]]
  function = "render-bot"
  path = "/profile/*"

# 3. ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î: ‡πÉ‡∏´‡πâ ssr-province.js ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ (‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡πâ‡∏≠‡∏á‡πÜ ‡πÉ‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ô‡∏±‡πâ‡∏ô)
[[edge_functions]]
  function = "ssr-province"
  path = "/location/*"

[[edge_functions]]
  function = "ssr-province"
  path = "/province/*"

# =========================================================
# ‚ö° SECURITY HEADERS (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á)
# =========================================================
[[headers]]
  for = "/*"
  [headers.values]
    # ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏™‡∏ß‡∏°‡∏£‡∏≠‡∏¢ (Clickjacking)
    X-Frame-Options = "SAMEORIGIN"
    # ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Browser ‡πÄ‡∏î‡∏≤‡∏ä‡∏ô‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏¥‡∏î‡πÜ
    X-Content-Type-Options = "nosniff"
    # ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô XSS Attack ‡∏Ç‡∏±‡πâ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
    X-XSS-Protection = "1; mode=block"
    # ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á Referrer ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
    Referrer-Policy = "strict-origin-when-cross-origin"
    # ‡∏õ‡∏¥‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
    Permissions-Policy = "geolocation=(), camera=(), microphone=()"

# =========================================================
# üöÄ CACHE CONTROL (‡πÄ‡∏£‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå)
# =========================================================

# 1. ‡πÑ‡∏ü‡∏•‡πå HTML: ‡∏´‡πâ‡∏≤‡∏° Cache (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ User ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÄ‡∏™‡∏°‡∏≠)
[[headers]]
  for = "/*.html"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

# 2. ‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û/JS/CSS: Cache 1 ‡∏õ‡∏µ (‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏à‡∏≥‡∏¢‡∏≤‡∏ß‡πÜ ‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏∞‡∏•‡∏∑‡πà‡∏ô‡∏°‡∏≤‡∏Å)
[[headers]]
  for = "/images/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/js/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/css/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# =========================================================
# üîÄ REDIRECT RULES (SPA FALLBACK)
# =========================================================

# ‡∏Å‡∏é‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ñ‡πâ‡∏≤ URL ‡πÑ‡∏´‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏£‡∏¥‡∏á ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ index.html 
# ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ React/JavaScript ‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ (SPA Routing)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
