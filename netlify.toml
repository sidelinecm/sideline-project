

# =============================================================================
# netlify.toml (ฉบับปรับปรุง)
# =============================================================================

# 1. การตั้งค่า Build
[build]
  publish = "." # โฟลเดอร์ที่ deploy (ถูกต้องแล้วสำหรับเว็บ Static)

# 2. การตั้งค่า Headers (รวบให้สั้นลงและปลอดภัยขึ้น)

# --- ควบคุมไฟล์หลักของเว็บ (โหลดใหม่เสมอ) ---
[[headers]]
  for = '''
  /*.html
  '''
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

# --- ควบคุม Service Worker (ห้ามแคชเด็ดขาด) ---
[[headers]]
  for = "/sw.js"
  [headers.values]
    # "no-store, no-cache, must-revalidate" เป็นคำสั่งที่เข้มงวดที่สุด
    Cache-Control = "no-store, no-cache, must-revalidate"
    Service-Worker-Allowed = "/"

# --- ควบคุมไฟล์ Assets ที่ไม่ค่อยเปลี่ยน (ให้เบราว์เซอร์เช็คก่อน) ---
# นี่คือวิธีที่ปลอดภัย: ให้แคชได้ 1 ปี แต่ต้องกลับมาถามเซิร์ฟเวอร์ก่อนใช้ (ETag check)
# ถ้าไฟล์ไม่เปลี่ยน เซิร์ฟเวอร์จะตอบกลับ 304 Not Modified (เร็วมาก)
# ถ้าไฟล์เปลี่ยน เซิร์ฟเวอร์จะส่งไฟล์ใหม่มาให้
[[headers]]
  for = '''
  /images/*
  /icons/*
  /fonts/*
 
  /*.css
  /*.js
  '''
  [headers.values]
    Cache-Control = "public, max-age=31536000, must-revalidate"

# --- ควบคุมไฟล์ PWA/SEO (แคชได้ แต่ให้เช็คใหม่ทุกวัน) ---
[[headers]]
  for = '''
  /manifest.webmanifest
  /robots.txt
  /sitemap.xml
  '''
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"



