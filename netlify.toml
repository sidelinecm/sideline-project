# =====================================
# üèóÔ∏è  Netlify Build Configuration
# =====================================
[build]
  publish = "."          # ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏ß‡πá‡∏ö (root)
  command = ""           # ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á build (‡πÄ‡∏ß‡πá‡∏ö static)
  environment = { NODE_VERSION = "18" }

# =====================================
# ‚öôÔ∏è  Global HTTP Security Headers
# =====================================
[[headers]]
  for = "/*"
  [headers.values]
    X-Content-Type-Options = "nosniff"
    X-Frame-Options = "SAMEORIGIN"
    X-XSS-Protection = "1; mode=block"
    Strict-Transport-Security = "max-age=63072000; includeSubDomains; preload"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "geolocation=(), microphone=(), camera=()"

# =====================================
# üï∏Ô∏è  HTML Pages ‚Äì Cache Short, Must Validate
# =====================================
[[headers]]
  for = "*.html"
  [headers.values]
    cache-control = "public, max-age=600, must-revalidate"  # 10 ‡∏ô‡∏≤‡∏ó‡∏µ

# =====================================
# üß†  Service Worker / Manifest / Sitemap / Robots
# =====================================
[[headers]]
  for = "/sw.js"
  [headers.values]
    cache-control = "no-store, no-cache, must-revalidate"

[[headers]]
  for = "/manifest.webmanifest"
  [headers.values]
    cache-control = "public, max-age=86400, must-revalidate"  # 1 ‡∏ß‡∏±‡∏ô

[[headers]]
  for = "/sitemap.xml"
  [headers.values]
    cache-control = "public, max-age=86400, must-revalidate"  # 1 ‡∏ß‡∏±‡∏ô

[[headers]]
  for = "/robots.txt"
  [headers.values]
    cache-control = "public, max-age=86400, must-revalidate"  # 1 ‡∏ß‡∏±‡∏ô

# =====================================
# üñºÔ∏è  Static Assets (CSS / JS / Fonts / Images) ‚Äì Long-term Cache
# =====================================
[[headers]]
  for = "/images/*"
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/icons/*"
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/fonts/*"
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/css/*"
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/js/*"
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"

# =====================================
# ‚ö°  Performance Optimization
# =====================================
[[headers]]
  for = "/*"
  [headers.values]
    # ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î Brotli + Gzip ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    vary = "Accept-Encoding"
    # ‡πÄ‡∏õ‡∏¥‡∏î HTTP Caching ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Edge CDN
    Cache-Control = "public"

# =====================================
# üîÄ  Redirect Rules
# =====================================
# ‚úÖ SPA: ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å path ‡πÇ‡∏´‡∏•‡∏î index.html (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏∏‡∏î)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# ‚úÖ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á redirect ‡πÄ‡∏Å‡πà‡∏≤ ‚Üí ‡πÉ‡∏´‡∏°‡πà (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
[[redirects]]
  from = "/old-path/*"
  to = "/new-path/:splat"
  status = 301
  force = true

# ‚úÖ Redirect ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠
[[redirects]]
  from = "/old-page.html"
  to = "/new-page.html"
  status = 301
  force = true

# =====================================
# üîç  Prerendering Configuration
# =====================================
[prerender]
  enabled = true          # ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ prerender (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ï‡πà‡∏≠ SEO)
  crawl = true            # ‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö prerender ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  cache = true            # ‡πÅ‡∏Ñ‡∏ä‡∏ú‡∏• prerender ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô

