# =====================================
# üèóÔ∏è  Netlify Build Configuration
# =====================================
[build]
  publish = "."          # ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏ß‡πá‡∏ö (root)
  command = ""           # ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á build (‡πÄ‡∏ß‡πá‡∏ö static)
  environment = { NODE_VERSION = "18" }

# =====================================
# ‚öôÔ∏è  Global HTTP Security Headers
# =====================================
[[headers]]
  for = "/*"
  [headers.values]
    X-Content-Type-Options = "nosniff"
    X-Frame-Options = "SAMEORIGIN"
    X-XSS-Protection = "1; mode=block"
    Strict-Transport-Security = "max-age=63072000; includeSubDomains; preload"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "geolocation=(), microphone=(), camera=()"

# =====================================
# üï∏Ô∏è  HTML Pages ‚Äì Cache Short, Must Validate
# =====================================
[[headers]]
  for = "*.html"
  [headers.values]
    cache-control = "public, max-age=600, must-revalidate"  # 10 ‡∏ô‡∏≤‡∏ó‡∏µ

# =====================================
# üß†  Service Worker / Manifest / Sitemap / Robots
# =====================================
[[headers]]
  for = "/sw.js"
  [headers.values]
    cache-control = "no-store, no-cache, must-revalidate"

[[headers]]
  for = "/manifest.webmanifest"
  [headers.values]
    cache-control = "public, max-age=86400, must-revalidate"  # 1 ‡∏ß‡∏±‡∏ô

[[headers]]
  for = "/sitemap.xml"
  [headers.values]
    cache-control = "public, max-age=86400, must-revalidate"  # 1 ‡∏ß‡∏±‡∏ô

[[headers]]
  for = "/robots.txt"
  [headers.values]
    cache-control = "public, max-age=86400, must-revalidate"  # 1 ‡∏ß‡∏±‡∏ô

# =====================================
# üñºÔ∏è  Static Assets (CSS / JS / Fonts / Images) ‚Äì Long-term Cache
# =====================================
[[headers]]
  for = "/images/*"
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/icons/*"
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/fonts/*"
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/css/*"
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/js/*"
  [headers.values]
    cache-control = "public, max-age=31536000, immutable"

# =====================================
# ‚ö°  Performance Optimization
# =====================================
[[headers]]
  for = "/*"
  [headers.values]
    # ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î Brotli + Gzip ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    vary = "Accept-Encoding"
    # ‡πÄ‡∏õ‡∏¥‡∏î HTTP Caching ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Edge CDN
    Cache-Control = "public"
# =====================================
# üîÄ  Redirect Rules
# =====================================

# ‚úÖ 1. ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ Service Worker ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏£‡∏á (‡πÑ‡∏°‡πà redirect ‡πÑ‡∏õ index.html)
[[redirects]]
  from = "/sw.js"
  to = "/sw.js"
  status = 200
  force = true

# ‚úÖ 2. (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ PWA ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏∑‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô manifest ‡∏´‡∏£‡∏∑‡∏≠ offline page)
[[redirects]]
  from = "/manifest.webmanifest"
  to = "/manifest.webmanifest"
  status = 200
  force = true

# ‚úÖ 3. SPA Fallback ‚Äî ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å path ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÇ‡∏´‡∏•‡∏î index.html
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# ‚úÖ 4. ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á redirect ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏Å‡πà‡∏≤ ‚Üí ‡πÉ‡∏´‡∏°‡πà (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ)
[[redirects]]
  from = "/old-path/*"
  to = "/new-path/:splat"
  status = 301
  force = true

# ‚úÖ 5. Redirect ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠
[[redirects]]
  from = "/old-page.html"
  to = "/new-page.html"
  status = 301
  force = true

# =====================================
# üîÄ  Redirect Rules
# =====================================
# ... (‡∏Å‡∏é Redirect ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì)

# üö® ‡∏Å‡∏é‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á SEO "/seo-profiles/*" ‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
# ‡πÄ‡∏ô‡πâ‡∏ô: Google Bot ‡∏à‡∏∞‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏é 3xx/4xx Redirects/Rewrites ‡∏ô‡∏µ‡πâ ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡∏ñ‡∏π‡∏Å Edge Function ‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô
[[redirects]]
  from = "/seo-profiles/*"
  to = "/404" 
  status = 302 # ‡πÉ‡∏ä‡πâ 302 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ Redirect ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
