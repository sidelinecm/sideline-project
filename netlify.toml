# =============================================================================
# 1. การตั้งค่า Deploy (เว็บ Static ไม่ต้อง Build)
# =============================================================================
[build]
  publish = "."   # ใช้ root folder เป็นโฟลเดอร์ deploy

# =============================================================================
# 2. การตั้งค่า Redirects (เลือกใช้ตามต้องการ)
# =============================================================================
# [[redirects]]
#   from = "https://sidelinechiangmai.netlify.app/*"
#   to = "https://www.sidelinechiangmai.netlify.app/:splat"
#   status = 301
#   force = true

# =============================================================================
# 3. การตั้งค่า Headers (ฉบับแก้ไขสมบูรณ์)
# =============================================================================

# --- HTML (ไม่ cache เก็บสดใหม่เสมอ) ---
[[headers]]
  for = "/*.html"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

# --- CSS (cache 1 ปี, immutable) ---
[[headers]]
  for = "/*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# --- JS (cache 1 ปี, immutable) ---
[[headers]]
  for = "/*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# --- Fonts (cache ยาวสุด 1 ปี, immutable) ---
[[headers]]
  for = "/webfonts/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# --- Fonts (cache ยาวสุด 1 ปี, immutable) ---
[[headers]]
  for = "/fonts/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# --- Images (cache ยาวสุด 1 ปี, immutable) ---
[[headers]]
  for = "/images/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# --- Icons (cache ยาวสุด 1 ปี, immutable) ---
[[headers]]
  for = "/icons/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# --- Service Worker (ห้าม cache, ให้โหลดใหม่เสมอ) ---
[[headers]]
  for = "/sw.js"
  [headers.values]
    Cache-Control = "no-cache"
    Service-Worker-Allowed = "/"

# --- PWA / SEO files (cache 1 วัน) ---
[[headers]]
  for = "/manifest.webmanifest"
  [headers.values]
    Cache-Control = "public, max-age=86400"

[[headers]]
  for = "/robots.txt"
  [headers.values]
    Cache-Control = "public, max-age=86400"

[[headers]]
  for = "/sitemap.xml"
  [headers.values]
    Cache-Control = "public, max-age=86400"
